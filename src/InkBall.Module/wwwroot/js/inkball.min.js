"use strict";/******** funcs-n-classes ********/const StatusEnum=Object.freeze({POINT_FREE:-1,POINT_STARTING:0,POINT_IN_PATH:1,POINT_OWNED_BY_RED:2,POINT_OWNED_BY_BLU:3});class InkBallPointViewModel{constructor(a=0,b=0,c=0,d=0,e=0,f=StatusEnum.POINT_FREE,g=0,h=""){this.iId=a,this.iGameId=b,this.iPlayerId=c,this.iX=d,this.iY=e,this.Status=f,this.iEnclosingPathId=g,this.Message=h}static Format(a,b){let c=/*htmlEncode*/b.Message;return a+" says "+c}}function htmlEncode(a){//return html.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
return document.createElement("a").appendChild(document.createTextNode(a)).parentNode.innerHTML}/******** /funcs-n-classes ********/var g_SignalRConnection=null,g_iGameID=null,g_iPlayerID=null;function BuildSignalR(a,b,c,d,e){null===a||""===a||(g_SignalRConnection=new signalR.HubConnectionBuilder().withUrl(a,{transport:d,accessTokenFactory:e}).withHubProtocol(c).configureLogging(b).build())}function StartSignalRConnection(a,b){async function c(){try{await g_SignalRConnection.start(),console.log("connected")}catch(a){console.log(a),setTimeout(()=>c(),5e3)}}null===g_SignalRConnection||(// Execute a function when the user releases a key on the keyboard
g_iGameID=a,g_iPlayerID=b,g_SignalRConnection.on("ReceiveMessage",function(a,b){let c=InkBallPointViewModel.Format(b,a),d=document.createElement("li");d.textContent=c,document.getElementById("messagesList").appendChild(d)}),document.getElementById("sendButton").addEventListener("click",function(a){let b=document.getElementById("messageInput").value,c=new InkBallPointViewModel(0,g_iGameID,g_iPlayerID,1,2,StatusEnum.POINT_IN_PATH,0,b);g_SignalRConnection.invoke("SendMessage",c).catch(function(a){return console.error(a.toString())}),a.preventDefault()}),document.getElementById("messageInput").addEventListener("keyup",function(a){a.preventDefault(),13===a.keyCode&&document.getElementById("sendButton").click()}),g_SignalRConnection.onclose(async a=>{null===a?await c():(console.log(a),setTimeout(()=>c(),5e3))}),c())}